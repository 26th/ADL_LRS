{% extends "base.html" %}
{% block title %}{{user.username}} Home{% endblock title %}
{% block heading %}{{user.username}} Home{% endblock heading %}
{% block content %}
</br>
<div id="clientapps">
    <span class="heading">Client Apps:</span>
    {% if client_apps %}
        {% for app in client_apps %}
        <ul>
            <li class="left field">{{ app.name }}</li>
            <li class="left"><span style="color:
                {% if app.status == 1 %}goldenrod
                {% elif app.status == 2 %}green
                {% elif app.status == 3 %}darkred
                {% elif app.status == 4 %}darkred
                {% endif %}">{{ app.get_status_display }}</span></li>
            <ul>
                <li><span class="field">Key:</span> {{ app.key }}</li>
                <li><span class="field">Secret:</span> {{ app.secret }}</li>
            </ul>
        </ul>
        {% endfor %}
    {% else %}
    None
    {% endif %}
</div>
<div id="recentactivity">
    <span class="heading">Recent Requests:</span>
    <ul>
        {% for action in action_list %}
            <li>deleted in {{ action.0.days_til_del }} days</li>
            <li>{{ action.0.get_level_display }} {{ action.0.message }} [{{ action.0.timestamp }}] by {% if action.0.content_object %} {{ action.0.content_object }} {% else %} Unknown {% endif %} {{ action.0.status_code }}</li>
            <ul>
                {% for ch_action in action.1 %}
                    <li>{{ ch_action.get_level_display }} {{ ch_action.message }} [{{ ch_action.timestamp }}]</li>
                {% endfor %}
            </ul>
        {% empty %}
            <li>Sorry, no action yet!</li>
        {% endfor %}
    </ul>
</div>
{% endblock content %}